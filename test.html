<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>配管材料費 計算ツール</title>
  <style>
    body { font-family: sans-serif; margin: 30px; }
    label, input, select { margin: 5px 0; display: block; }
    input[type=number] { width: 100px; }
  </style>
</head>
<body>

  <h2>概算機２開発中</h2>

  <label>材質:
    <select id="material">
      <option value="500">鉄</option>
      <option value="800">ステンレス</option>
      <option value="1200">銅</option>
    </select>
  </label>

  <label>材料（円/kg）:
    <input type="number" id="unitPrice" value="500">
  </label>

  <label>口径（A）:
    <select id="diameter">
      <option value="1.00">25A</option>
      <option value="1.32">32A</option>
      <option value="1.68">40A</option>
      <option value="2.29">50A</option>
      <option value="3.24">65A</option>
      <option value="4.10">80A</option>
      <option value="6.02">100A</option>
    </select>
  </label>

  <label>スケジュール
    <select id="schedule">
      <option value="1.00">Sch.40</option>
      <option value="1.10">Sch.80</option>
      <option value="1.25">Sch.160</option>
    </select>
  </label>

  <label>配管長（m）:
    <input type="number" id="length" value="10">
  </label>

  <label>エルボ個数:
    <input type="number" id="elbow" value="4">
  </label>

  <label>T字管個数:
    <input type="number" id="tee" value="2">
  </label>

  <label>フランジ個数:
    <input type="number" id="flange" value="2">
  </label>

  <h3>🔍 計算結果</h3>
  <p>総重量（kg）: <span id="totalWeight">0</span></p>
  <p>材料費（円）: <strong><span id="totalCost">0</span></strong></p>

  <script>
    const unitPriceInput = document.getElementById("unitPrice");
    const materialSelect = document.getElementById("material");

    // 材質変更時に単価を自動更新
    materialSelect.addEventListener("change", () => {
      unitPriceInput.value = materialSelect.value;
      update();
    });

    const update = () => {
      const unitPrice = parseFloat(unitPriceInput.value);
      const diaFactor = parseFloat(document.getElementById("diameter").value);
      const schFactor = parseFloat(document.getElementById("schedule").value);
      const length = parseFloat(document.getElementById("length").value);
      const elbow = parseInt(document.getElementById("elbow").value) || 0;
      const tee = parseInt(document.getElementById("tee").value) || 0;
      const flange = parseInt(document.getElementById("flange").value) || 0;

      const elbowWeight = 0.5;
      const teeWeight = 0.8;
      const flangeWeight = 1.2;

      const pipeWeight = length * diaFactor * schFactor;
      const fittingsWeight = diaFactor * (
        elbow * elbowWeight + tee * teeWeight + flange * flangeWeight
      );

      const totalWeight = pipeWeight + fittingsWeight;
      const totalCost = Math.round(totalWeight * unitPrice);

      document.getElementById("totalWeight").textContent = totalWeight.toFixed(2);
      document.getElementById("totalCost").textContent = totalCost.toLocaleString();
    };

    document.querySelectorAll("input, select").forEach(el => {
      el.addEventListener("input", update);
    });

    update(); // 初期表示
  </script>
</body>
</html>
