<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>é…ç®¡ææ–™è²» è¨ˆç®—ãƒ„ãƒ¼ãƒ«</title>
  <style>
    body { font-family: sans-serif; margin: 30px; }
    label, input, select { margin: 5px 0; display: block; }
    input[type=number] { width: 100px; }
  </style>
</head>
<body>

  <h2>æ¦‚ç®—æ©Ÿï¼’é–‹ç™ºä¸­</h2>

  <label>æè³ª:
    <select id="material">
      <option value="500">é‰„</option>
      <option value="800">ã‚¹ãƒ†ãƒ³ãƒ¬ã‚¹</option>
      <option value="1200">éŠ…</option>
    </select>
  </label>

  <label>ææ–™ï¼ˆå††/kgï¼‰:
    <input type="number" id="unitPrice" value="500">
  </label>

  <label>å£å¾„ï¼ˆAï¼‰:
    <select id="diameter">
      <option value="1.00">25A</option>
      <option value="1.32">32A</option>
      <option value="1.68">40A</option>
      <option value="2.29">50A</option>
      <option value="3.24">65A</option>
      <option value="4.10">80A</option>
      <option value="6.02">100A</option>
    </select>
  </label>

  <label>ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«
    <select id="schedule">
      <option value="1.00">Sch.40</option>
      <option value="1.10">Sch.80</option>
      <option value="1.25">Sch.160</option>
    </select>
  </label>

  <label>é…ç®¡é•·ï¼ˆmï¼‰:
    <input type="number" id="length" value="10">
  </label>

  <label>ã‚¨ãƒ«ãƒœå€‹æ•°:
    <input type="number" id="elbow" value="4">
  </label>

  <label>Tå­—ç®¡å€‹æ•°:
    <input type="number" id="tee" value="2">
  </label>

  <label>ãƒ•ãƒ©ãƒ³ã‚¸å€‹æ•°:
    <input type="number" id="flange" value="2">
  </label>

  <h3>ğŸ” è¨ˆç®—çµæœ</h3>
  <p>ç·é‡é‡ï¼ˆkgï¼‰: <span id="totalWeight">0</span></p>
  <p>ææ–™è²»ï¼ˆå††ï¼‰: <strong><span id="totalCost">0</span></strong></p>

  <script>
    const unitPriceInput = document.getElementById("unitPrice");
    const materialSelect = document.getElementById("material");

    // æè³ªå¤‰æ›´æ™‚ã«å˜ä¾¡ã‚’è‡ªå‹•æ›´æ–°
    materialSelect.addEventListener("change", () => {
      unitPriceInput.value = materialSelect.value;
      update();
    });

    const update = () => {
      const unitPrice = parseFloat(unitPriceInput.value);
      const diaFactor = parseFloat(document.getElementById("diameter").value);
      const schFactor = parseFloat(document.getElementById("schedule").value);
      const length = parseFloat(document.getElementById("length").value);
      const elbow = parseInt(document.getElementById("elbow").value) || 0;
      const tee = parseInt(document.getElementById("tee").value) || 0;
      const flange = parseInt(document.getElementById("flange").value) || 0;

      const elbowWeight = 0.5;
      const teeWeight = 0.8;
      const flangeWeight = 1.2;

      const pipeWeight = length * diaFactor * schFactor;
      const fittingsWeight = diaFactor * (
        elbow * elbowWeight + tee * teeWeight + flange * flangeWeight
      );

      const totalWeight = pipeWeight + fittingsWeight;
      const totalCost = Math.round(totalWeight * unitPrice);

      document.getElementById("totalWeight").textContent = totalWeight.toFixed(2);
      document.getElementById("totalCost").textContent = totalCost.toLocaleString();
    };

    document.querySelectorAll("input, select").forEach(el => {
      el.addEventListener("input", update);
    });

    update(); // åˆæœŸè¡¨ç¤º
  </script>
</body>
</html>
