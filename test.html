<!DOCTYPE html>
<html lang="ja">

<head>
  <meta charset="UTF-8" />
  <title>ãƒ—ãƒ©ãƒ³ãƒˆè¨­è¨ˆåˆ¤æ–­ MAXæ”¯æ´SPA</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    body {
      background: #1c1c1c;
      color: #f1f1f1;
      font-family: "Meiryo", sans-serif;
      margin: 0;
      padding: 0;
      user-select: none;
    }

    header {
      background: #ff3f34;
      padding: 20px;
      font-size: 2em;
      text-align: center;
      font-weight: bold;
      letter-spacing: 0.1em;
      text-shadow: 1px 1px 2px #330000;
    }

    nav {
      display: flex;
      background: #2f3640;
      box-shadow: inset 0 -3px 5px #ff5e57;
    }

    nav button {
      flex: 1;
      padding: 15px 0;
      border: none;
      background: #2f3640;
      color: white;
      cursor: pointer;
      font-size: 1.1em;
      transition: background 0.3s, color 0.3s;
      font-weight: 600;
      letter-spacing: 0.03em;
    }

    nav button.active,
    nav button:hover {
      background: #ff5e57;
      color: #000;
      font-weight: 800;
      box-shadow: 0 2px 8px #ff5e57aa;
      transform: scale(1.05);
      z-index: 10;
    }

    section {
      display: none;
      padding: 20px 30px;
      max-width: 720px;
      margin: 20px auto;
      border-radius: 10px;
      background: #292929dd;
      box-shadow: 0 0 20px #000 inset;
      min-height: 320px;
    }

    section.active {
      display: block;
      animation: fadein 0.6s ease forwards;
    }

    @keyframes fadein {
      from {
        opacity: 0;
        transform: translateY(20px);
      }

      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    input,
    textarea,
    select {
      width: 100%;
      padding: 12px 14px;
      margin-top: 10px;
      background: #333;
      color: #eee;
      border: 1.8px solid #666;
      border-radius: 6px;
      font-size: 1em;
      font-weight: 600;
      resize: vertical;
      box-sizing: border-box;
      transition: border-color 0.3s;
    }

    input:focus,
    textarea:focus,
    select:focus {
      outline: none;
      border-color: #ff5e57;
      box-shadow: 0 0 8px #ff5e57cc;
      background: #3a3a3a;
    }

    label {
      display: block;
      font-weight: 700;
      margin-top: 20px;
      letter-spacing: 0.05em;
    }

    button.action {
      margin-top: 18px;
      padding: 14px 30px;
      background: #0fbcf9;
      color: #000;
      font-weight: 900;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-size: 1.2em;
      letter-spacing: 0.07em;
      transition: background 0.3s ease;
      user-select: none;
    }

    button.action:hover {
      background: #06a7db;
      box-shadow: 0 0 14px #0fbcf9bb;
      transform: scale(1.05);
    }

    #aiResult,
    #exportStatus {
      white-space: pre-wrap;
      margin-top: 24px;
      background: #111;
      padding: 14px 16px;
      border-radius: 8px;
      font-family: monospace;
      font-size: 1.05em;
      min-height: 90px;
      box-shadow: inset 0 0 8px #ff5e5733;
    }

    ul#checkList {
      margin-top: 20px;
      padding-left: 0;
      list-style-type: none;
      font-size: 1.05em;
    }

    ul#checkList li {
      margin: 10px 0;
      background: #444;
      border-left: 5px solid #0fbcf9;
      padding: 10px 15px;
      font-weight: 600;
      letter-spacing: 0.02em;
      border-radius: 5px;
      box-shadow: 0 0 8px #0fbcf9aa inset;
    }

    canvas#forceCanvas {
      background: #111;
      margin-top: 30px;
      border-radius: 12px;
      box-shadow: 0 0 15px #0fbcf9cc inset;
      display: block;
      margin-left: auto;
      margin-right: auto;
    }

    footer {
      text-align: center;
      color: #777;
      font-size: 0.9em;
      margin: 40px 0 20px;
      letter-spacing: 0.1em;
      user-select: none;
    }
  </style>
</head>

<body>
  <header>AIÃ—åŠ›å­¦Ã—è²¬ä»»åˆ†ç•Œ - è¶…è¨­è¨ˆSPA</header>
  <nav>
    <button class="active" onclick="switchTab(event, 'ai')">AIåˆ¤æ–­</button>
    <button onclick="switchTab(event, 'force')">å¿œåŠ›æç”»</button>
    <button onclick="switchTab(event, 'check')">ãƒã‚§ãƒƒã‚¯ç”Ÿæˆ</button>
    <button onclick="switchTab(event, 'export')">å¸³ç¥¨å‡ºåŠ›</button>
  </nav>

  <section id="ai" class="active">
    <h2>æ¡ä»¶å…¥åŠ› & AIè¨­è¨ˆåˆ¤æ–­</h2>
    <textarea id="conditionText" rows="7" placeholder="ä¾‹: å±‹å¤–é…ç®¡ãƒ»åºŠè€è·é‡500kg/m2ãƒ»æ¶å°å¿…è¦ãƒ»é˜²æŒ¯è£…ç½®ã‚ã‚Š..."
      spellcheck="false"></textarea>
    <button class="action" onclick="aiJudge()">AIåˆ¤æ–­é–‹å§‹</button>
    <div id="aiResult" aria-live="polite" role="region"></div>
  </section>

  <section id="force">
    <h2>è·é‡å¿œåŠ›è¨ˆç®—ã¨æç”»</h2>
    <label for="forceVal">åŠè·é‡ (kg):</label>
    <input id="forceVal" type="number" min="1" max="100000" step="1" value="1000" />
    <label for="angleVal">åŠè§’åº¦ (Â°):</label>
    <input id="angleVal" type="number" min="1" max="90" step="1" value="45" />
    <button class="action" onclick="drawForce()">æç”»å®Ÿè¡Œ</button>
    <canvas id="forceCanvas" width="420" height="320" aria-label="åŠè·é‡ã®å¿œåŠ›å›³"></canvas>
  </section>

  <section id="check">
    <h2>è²¬ä»»åˆ†ç•Œãƒã‚§ãƒƒã‚¯é …ç›®ç”Ÿæˆ</h2>
    <textarea id="designText" rows="5" placeholder="ä¾‹: ã‚¢ãƒ³ã‚«ãƒ¼ä¸è¦ã€å±‹ä¸Šæ¶å°ã€æŒ¯å‹•åˆ¶å¾¡æªç½®ã‚ã‚Š..." spellcheck="false"></textarea>
    <button class="action" onclick="generateChecklist()">ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆç”Ÿæˆ</button>
    <ul id="checkList" role="list"></ul>
  </section>

  <section id="export">
    <h2>å¸³ç¥¨å‡ºåŠ›</h2>
    <button class="action" onclick="exportPDF()">PDFå‡ºåŠ›ï¼ˆå®Ÿè£…äºˆå®šï¼‰</button>
    <button class="action" onclick="exportCSV()">CSVå‡ºåŠ›ï¼ˆå³ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ï¼‰</button>
    <div id="exportStatus" aria-live="polite" role="status"></div>
  </section>

  <footer>Â© 2025 BeyondStandard Design Systems</footer>

  <script>
    function switchTab(evt, tabId) {
      document.querySelectorAll("section").forEach((s) => s.classList.remove("active"));
      document.querySelectorAll("nav button").forEach((b) => b.classList.remove("active"));
      document.getElementById(tabId).classList.add("active");
      evt.target.classList.add("active");
    }

    function aiJudge() {
      const txt = document.getElementById("conditionText").value.trim();
      const resArea = document.getElementById("aiResult");
      if (!txt) {
        resArea.textContent = "âš ï¸ æ¡ä»¶ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚";
        return;
      }

      let lines = [];
      // AIåˆ¤æ–­ãƒ­ã‚¸ãƒƒã‚¯ï¼ˆè¶…è©³ç´°ç‰ˆï¼‰
      // â‘  å±‹å¤–è¨­ç½®ã‹ã©ã†ã‹
      if (/å±‹å¤–/.test(txt)) {
        lines.push(
          "âœ… ã€å±‹å¤–è¨­ç½®ã€‘\n - é˜²éŒ†ãƒ»è€å€™æ€§å¡—è£…ã¯å¿…é ˆ\n - ä¼¸ç¸®ç¶™æ‰‹ã‚„ã‚¨ã‚­ã‚¹ãƒ‘ãƒ³ã‚·ãƒ§ãƒ³ã®è¨­è¨ˆç¢ºèª"
        );
      }
      // â‘¡ åºŠè€è·é‡ã®æŒ‡å®šãŒã‚ã‚‹ã‹
      const weightMatch = txt.match(/åºŠè€è·é‡\s*(\d+)/);
      if (weightMatch) {
        const val = parseInt(weightMatch[1]);
        lines.push(
          `âœ… ã€åºŠè€è·é‡ã€‘ ${val}kg/mÂ²\n - è·é‡åˆ†æ•£è¨­è¨ˆã‚’æ¤œè¨\n - é‡é‡æ©Ÿå™¨æ¶å°ã®åŸºç¤å¼·åŒ–æ¤œè¨`
        );
      }
      // â‘¢ é˜²æŒ¯è£…ç½®é–¢é€£
      if (/é˜²æŒ¯|æŒ¯å‹•/.test(txt)) {
        lines.push(
          "âœ… ã€é˜²æŒ¯è¨­è¨ˆã€‘\n - ã‚¢ã‚¤ã‚½ãƒ¬ãƒ¼ã‚¿ãƒ¼è¨­ç½®ã®æ¤œè¨\n - æŒ¯å‹•çµ¶ç¸æ€§èƒ½ç¢ºèª\n - é…ç®¡æ”¯æŒã®æŸ”è»Ÿæ€§ç¢ºä¿"
        );
      }
      // â‘£ é«˜æ¸©ãƒ»é«˜åœ§é–¢é€£
      if (/é«˜æ¸©|é«˜åœ§/.test(txt)) {
        lines.push(
          "âš ï¸ ã€é«˜æ¸©ãƒ»é«˜åœ§æ¡ä»¶ã€‘\n - ææ–™é¸å®šã®å³æ ¼åŒ–\n - é…ç®¡è†¨å¼µè¨ˆç®—ã®å®Ÿæ–½å¿…é ˆ\n - å®‰å…¨å¼ãƒ»é€ƒãŒã—å¼è¨­ç½®"
        );
      }
      // â‘¤ ç‰¹æ®Šç’°å¢ƒï¼ˆè…é£Ÿæ€§æ¶²ä½“ãªã©ï¼‰
      if (/è…é£Ÿ|è–¬å“|é…¸/.test(txt)) {
        lines.push(
          "âš ï¸ ã€è…é£Ÿç’°å¢ƒã€‘\n - è€è…é£Ÿææ–™ä½¿ç”¨\n - å®šæœŸç‚¹æ¤œãƒ»äº¤æ›è¨ˆç”»ä½œæˆæ¨å¥¨"
        );
      }
      // â‘¥ ãã®ä»–ã€æ§‹é€ ç‰©ã¨ã®å¹²æ¸‰
      if (/å¹²æ¸‰|æ¶å°/.test(txt)) {
        lines.push(
          "âœ… ã€æ§‹é€ ç‰©å¹²æ¸‰ã€‘\n - ã‚¯ãƒªã‚¢ãƒ©ãƒ³ã‚¹ãƒã‚§ãƒƒã‚¯å®Ÿæ–½\n - æ¶å°è€è·é‡è¨ˆç®—ã‚’å³å¯†ã«"
        );
      }
      if (lines.length === 0) {
        lines.push("â„¹ï¸ å…¥åŠ›å†…å®¹ã‹ã‚‰åˆ¤æ–­ã§ãã‚‹æ³¨æ„ç‚¹ãŒè¦‹å½“ãŸã‚Šã¾ã›ã‚“ã€‚ã‚‚ã£ã¨è©³ç´°ã«è¨˜è¼‰ã—ã¦ãã ã•ã„ã€‚");
      }

      resArea.textContent = lines.join("\n\n");
    }

    function drawForce() {
      const canvas = document.getElementById("forceCanvas");
      const ctx = canvas.getContext("2d");
      const F = parseFloat(document.getElementById("forceVal").value);
      const angleDeg = parseFloat(document.getElementById("angleVal").value);
      const angleRad = (angleDeg * Math.PI) / 180;
      ctx.clearRect(0, 0, canvas.width, canvas.height);

      if (isNaN(F) || F <= 0) {
        ctx.fillStyle = "#f44";
        ctx.font = "bold 20px monospace";
        ctx.fillText("âš ï¸ æ­£ã—ã„åŠè·é‡ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„", 30, 160);
        return;
      }
      if (isNaN(angleDeg) || angleDeg <= 0 || angleDeg >= 90) {
        ctx.fillStyle = "#f44";
        ctx.font = "bold 20px monospace";
        ctx.fillText("âš ï¸ åŠè§’åº¦ã¯1ï½89åº¦ã§å…¥åŠ›ã—ã¦ãã ã•ã„", 30, 160);
        return;
      }

      // å¼µåŠ›T = F / (2 sin Î¸)
      const tension = F / (2 * Math.sin(angleRad));
      const tensionRounded = tension.toFixed(1);

      // æç”»è¨­å®š
      ctx.lineWidth = 4;
      ctx.strokeStyle = "#0fbcf9";
      ctx.fillStyle = "#0fbcf9";
      ctx.font = "bold 20px monospace";

      // åŸºæº–ç‚¹(åŠç‚¹)
      const x0 = canvas.width / 2;
      const y0 = 60;
      const length = 160;

      // å·¦å³ã®åŠã‚Šå…·çµ‚ç‚¹åº§æ¨™
      const x1 = x0 - length * Math.cos(angleRad);
      const y1 = y0 + length * Math.sin(angleRad);
      const x2 = x0 + length * Math.cos(angleRad);
      const y2 = y1;

      // åŠè·é‡çŸ¢å°
      ctx.beginPath();
      ctx.moveTo(x0, y0);
      ctx.lineTo(x1, y1);
      ctx.stroke();
      ctx.beginPath();
      ctx.moveTo(x0, y0);
      ctx.lineTo(x2, y2);
      ctx.stroke();

      // çŸ¢å°é ­
      function drawArrowhead(x, y, angle) {
        const size = 12;
        ctx.beginPath();
        ctx.moveTo(x, y);
        ctx.lineTo(x - size * Math.cos(angle - 0.4), y - size * Math.sin(angle - 0.4));
        ctx.lineTo(x - size * Math.cos(angle + 0.4), y - size * Math.sin(angle + 0.4));
        ctx.closePath();
        ctx.fill();
      }
      drawArrowhead(x1, y1, Math.atan2(y1 - y0, x1 - x0));
      drawArrowhead(x2, y2, Math.atan2(y2 - y0, x2 - x0));

      // ä¸­å¤®è·é‡çŸ¢å°ï¼ˆä¸‹å‘ãï¼‰
      ctx.strokeStyle = "#ff5e57";
      ctx.fillStyle = "#ff5e57";
      ctx.beginPath();
      ctx.moveTo(x0, y0);
      ctx.lineTo(x0, y0 + 110);
      ctx.stroke();
      drawArrowhead(x0, y0 + 110, Math.PI / 2);

      // ãƒ†ã‚­ã‚¹ãƒˆè¡¨ç¤º
      ctx.fillStyle = "#0fbcf9";
      ctx.fillText(`åŠè·é‡ F = ${F.toFixed(1)} kg`, 10, 30);
      ctx.fillText(`åŠè§’åº¦ Î¸ = ${angleDeg.toFixed(1)}Â°`, 10, 60);
      ctx.fillText(`å¼µåŠ› T = ${tensionRounded} kgf`, 10, 90);
    }

    function generateChecklist() {
      const txt = document.getElementById("designText").value.trim();
      const list = document.getElementById("checkList");
      list.innerHTML = "";
      if (!txt) {
        const li = document.createElement("li");
        li.textContent = "âš ï¸ æ¡ä»¶ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚";
        list.appendChild(li);
        return;
      }

      const items = [];
      // ãƒ­ã‚¸ãƒƒã‚¯ã«ã‚ˆã‚‹ãƒã‚§ãƒƒã‚¯é …ç›®ç”Ÿæˆ
      if (/ã‚¢ãƒ³ã‚«ãƒ¼/.test(txt)) {
        items.push("âœ” ã‚¢ãƒ³ã‚«ãƒ¼å…é™¤ç†ç”±ã‚’è¨­è¨ˆæ ¹æ‹ ã¨ã—ã¦æ˜ç¤º");
      }
      if (/å±‹ä¸Š/.test(txt)) {
        items.push("âœ” å±‹ä¸Šæ¶å°ã®è€è·é‡ã¨é¢¨è·é‡æ¤œè¨æ¸ˆã¿");
      }
      if (/é˜²æŒ¯|æŒ¯å‹•/.test(txt)) {
        items.push("âœ” é˜²æŒ¯å¯¾ç­–ãŒè¨­è¨ˆã«åæ˜ ã•ã‚Œã¦ã„ã‚‹");
      }
      if (/è…é£Ÿ|è–¬å“|é…¸/.test(txt)) {
        items.push("âœ” è€è…é£Ÿææ–™ã®ä½¿ç”¨ç¢ºèª");
      }
      if (/é«˜æ¸©|é«˜åœ§/.test(txt)) {
        items.push("âœ” é«˜æ¸©ãƒ»é«˜åœ§å¯¾å¿œã®é…ç®¡ä»•æ§˜ç¢ºèª");
      }
      if (/åŸºç¤|æ”¯æŒ/.test(txt)) {
        items.push("âœ” æ”¯æŒæ§‹é€ ã®è·é‡åˆ†æ•£è¨­è¨ˆæ¸ˆã¿");
      }
      if (items.length === 0) {
        items.push("â„¹ï¸ æ¡ä»¶ã«åŸºã¥ãç‰¹è¨˜äº‹é …ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚è©³ç´°å…¥åŠ›ã‚’æ¨å¥¨ã€‚");
      }
      items.forEach((v) => {
        const li = document.createElement("li");
        li.textContent = v;
        list.appendChild(li);
      });
    }

    javascript
    ã‚³ãƒ”ãƒ¼ã™ã‚‹
    ç·¨é›†ã™ã‚‹
    function exportCSV() {
      const lines = [];
      lines.push("AIåˆ¤æ–­çµæœ");
      const aiText = document.getElementById("aiResult").textContent.trim();
      lines.push(aiText.replace(/\n/g, " | "));
      lines.push("");
      lines.push("è²¬ä»»åˆ†ç•Œãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ");
      const checkLis = document.querySelectorAll("#checkList li");
      if (checkLis.length === 0) {
        lines.push("ï¼ˆæœªç”Ÿæˆï¼‰");
      } else {
        checkLis.forEach((li) => {
          lines.push(li.textContent);
        });
      }

      const csvContent = lines.join("\r\n");
      const blob = new Blob([csvContent], { type: "text/csv;charset=utf-8;" });
      const link = document.createElement("a");
      link.href = URL.createObjectURL(blob);
      link.download = "plant_project_report.csv";
      document.body.appendChild(link);
      link.click();
      document.body.removeChild(link);

      const status = document.getElementById("exportStatus");
      status.textContent = "âœ… CSVå¸³ç¥¨ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¾ã—ãŸã€‚";
    }

    function exportPDF() {
      const status = document.getElementById("exportStatus");
      status.textContent = "ğŸ›  PDFå‡ºåŠ›æ©Ÿèƒ½ã¯ç¾åœ¨é–‹ç™ºä¸­ã§ã™ã€‚ã—ã°ã‚‰ããŠå¾…ã¡ãã ã•ã„ã€‚";
    }

    // åˆå›æç”»å‘¼ã³å‡ºã—ï¼ˆä»»æ„ï¼‰
    drawForce();
  </script>
</body>

</html> 